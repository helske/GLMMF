{
    "contents" : "library(GLMMF)\ndat = read.csv(\"../GLMMF/born.csv\")\nY = dat[,-(1:4)]\nX = dat[,2:4] #remove id column\n#remove rare species:\nY = as.matrix(Y[,apply(Y>0,2,sum)>30])\n\nXdat<-do.call(rbind, replicate(ncol(Y), X, simplify=FALSE)) # 5069  3\nspecies<-rep(colnames(Y),each=nrow(Y))\nborneodata<-data.frame(c(Y),Xdat,species)\nnames(borneodata)<-c(\"abundance\",colnames(Xdat),\"species\")\n\nset.seed(12345)\nrandu1<-rnorm(37)\nrandu2<-rnorm(37)\n\nfitinit_glmmf<-glmmf(group=\"species\",response=\"abundance\",distinct=~randu1+randu2,\n                     nfactors=0,distribution=\"poisson\",maxiter=100,\n                     data=borneodata,control=list(trace=1,REPORT=1),method=\"BFGS\",trace=2,estimate=F)\n\nfitinit_glmmf$log #-1561.845\ninitmat_glmmf<-t(matrix(fitinit_glmmf$coefs[,37],nrow=3)[2:3,])\n\nfit_glmmf2<-glmmf2(group=\"species\",response=\"abundance\",distinct=~1,nfactors=2,distribution=\"poisson\",\n                   convtol=1e-8,maxiter=100,maxiter2=5,init.factor=initmat_glmmf,\n                   data=borneodata, estimate=T,trace=1,epsilon=1e-8,maxapp=100,gradient=TRUE,\n                   check.analyticals=FALSE,print.level=0,typsize=rep(0,sum(lower.tri(initmat_glmmf,TRUE))),\n                   fscale=7000,iterlim=50)\n\nfit_glmmf2b<-glmmf(group=\"species\",response=\"abundance\",distinct=~1,nfactors=2,distribution=\"poisson\",\n                   convtol=1e-8,maxiter=1000,maxiter2=5,init.factor=initmat_glmmf,\n                   data=borneodata, estimate=T)\nfit_glmmf2$coefs-fit_glmmf2b$coefs\n",
    "created" : 1417788334062.000,
    "dirty" : true,
    "encoding" : "",
    "folds" : "",
    "hash" : "2406434880",
    "id" : "7E7BF3ED",
    "lastKnownWriteTime" : 2315520242515796841,
    "path" : null,
    "project_path" : null,
    "properties" : {
        "tempName" : "Untitled6"
    },
    "source_on_save" : false,
    "type" : "r_source"
}